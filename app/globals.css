@tailwind base;
@tailwind components;
@tailwind utilities;

/* =========================================================
   XFUSE — Tech Premium (Lightweight)
   ========================================================= */

/* ---------- Design Tokens ---------- */
:root {
  /* Base */
  --bg: 0 0 0;
  --bg2: 10 10 20;
  --fg: 245 245 255;
  --muted: 170 170 185;

  /* Surfaces */
  --card: 255 255 255;
  --card-alpha: 0.04;       /* dark surface transparency */
  --border: 255 255 255;
  --border-alpha: 0.10;

  /* Brand */
  --primary: 0 163 255;     /* cyan-blue */
  --accent: 126 34 206;     /* purple */
  --warm: 255 95 31;        /* orange */

  /* Effects */
  --blur: 14px;
  --radius: 16px;

  /* Legacy vars (keep if used in components) */
  --foreground-rgb: var(--fg);
  --background-start-rgb: var(--bg);
  --background-end-rgb: var(--bg2);
}

/* Light Mode */
:root.light {
  --bg: 250 250 252;
  --bg2: 238 242 255;
  --fg: 18 18 28;
  --muted: 90 90 110;

  --card: 255 255 255;
  --card-alpha: 0.78;
  --border: 0 0 0;
  --border-alpha: 0.10;

  --foreground-rgb: var(--fg);
  --background-start-rgb: var(--bg);
  --background-end-rgb: var(--bg2);
}

* {
  box-sizing: border-box;
  padding: 0;
  margin: 0;
}

html {
  scroll-behavior: smooth;
}

/* ---------- Body Background (premium but light) ---------- */
body {
  color: rgb(var(--fg));
  background:
    radial-gradient(1200px 700px at 20% 20%, rgba(var(--primary), 0.12), transparent 60%),
    radial-gradient(1000px 600px at 80% 30%, rgba(var(--accent), 0.10), transparent 60%),
    radial-gradient(900px 550px at 50% 90%, rgba(var(--warm), 0.06), transparent 65%),
    linear-gradient(to bottom, rgb(var(--bg)), rgb(var(--bg2)));
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',
    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

/* subtle noise overlay (static, cheap) */
body::before {
  content: "";
  position: fixed;
  inset: 0;
  pointer-events: none;
  opacity: 0.06;
  background-image:
    url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='220' height='220'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.8' numOctaves='2' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='220' height='220' filter='url(%23n)' opacity='.35'/%3E%3C/svg%3E");
  mix-blend-mode: overlay;
}

/* ---------- Performance: stop global transitions ---------- */
/* IMPORTANT: لا تعمل transition على * لأنه بيهنج عند تغيير المود/اللغة */
a, button, input, textarea, select, .glass, .glass-premium, .glass-light, .card-3d {
  transition: background-color 180ms ease, color 180ms ease, border-color 180ms ease,
    box-shadow 180ms ease, transform 180ms ease, opacity 180ms ease;
}

/* Reduce motion support */
@media (prefers-reduced-motion: reduce) {
  html { scroll-behavior: auto; }
  *, *::before, *::after {
    animation: none !important;
    transition: none !important;
  }
}

/* ---------- Utilities ---------- */
@layer utilities {
  /* Glass (lighter) */
  .glass {
    background: rgba(var(--card), var(--card-alpha));
    border: 1px solid rgba(var(--border), var(--border-alpha));
    backdrop-filter: blur(var(--blur));
    -webkit-backdrop-filter: blur(var(--blur));
    border-radius: var(--radius);
  }

  .glass-premium {
    background: rgba(var(--card), calc(var(--card-alpha) * 0.9));
    border: 1px solid rgba(var(--border), calc(var(--border-alpha) + 0.05));
    backdrop-filter: blur(18px) saturate(140%);
    -webkit-backdrop-filter: blur(18px) saturate(140%);
    border-radius: calc(var(--radius) + 4px);
    /* shadow أخف عشان الأداء */
    box-shadow:
      0 10px 30px rgba(0, 0, 0, 0.20),
      inset 0 1px 0 rgba(255, 255, 255, 0.06);
  }

  :root.light .glass-premium {
    box-shadow:
      0 10px 26px rgba(0, 0, 0, 0.06),
      inset 0 1px 0 rgba(255, 255, 255, 0.7);
  }

  .glass-light {
    background: rgba(255, 255, 255, 0.75);
    border: 1px solid rgba(0, 0, 0, 0.08);
    backdrop-filter: blur(10px);
    -webkit-backdrop-filter: blur(10px);
    border-radius: var(--radius);
  }

  /* 3D Card (خففنا الـ hover شوية) */
  .card-3d {
    transform-style: preserve-3d;
    will-change: transform;
  }
  .card-3d:hover {
    transform: translateY(-6px);
  }

  .perspective-container {
    perspective: 1400px;
    perspective-origin: center;
  }

  /* Text gradients */
  .text-gradient {
    background: linear-gradient(135deg, rgb(var(--primary)) 0%, #06b6d4 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .text-gradient-accent {
    background: linear-gradient(135deg, rgb(var(--accent)) 0%, rgb(var(--warm)) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .text-gradient-3d {
    background: linear-gradient(135deg, rgb(var(--warm)) 0%, rgb(var(--accent)) 50%, rgb(var(--primary)) 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    /* شادو أخف */
    text-shadow: 0 6px 18px rgba(var(--primary), 0.18);
  }

  /* Small GPU helper */
  .gpu-accelerated {
    transform: translateZ(0);
    will-change: transform;
    backface-visibility: hidden;
  }
}

/* ---------- Scrollbar ---------- */
::-webkit-scrollbar {
  width: 10px;
}
::-webkit-scrollbar-track {
  background: rgba(0, 0, 0, 0.22);
}
:root.light ::-webkit-scrollbar-track {
  background: rgba(0, 0, 0, 0.06);
}
::-webkit-scrollbar-thumb {
  background: linear-gradient(135deg, rgb(var(--warm)), rgb(var(--accent)), rgb(var(--primary)));
  border-radius: 10px;
  border: 2px solid rgba(0, 0, 0, 0.25);
}
:root.light ::-webkit-scrollbar-thumb {
  border: 2px solid rgba(255, 255, 255, 0.7);
}

/* Selection */
::selection {
  background: rgba(var(--primary), 0.28);
  color: #fff;
}

/* Focus */
:focus-visible {
  outline: 2px solid rgb(var(--primary));
  outline-offset: 2px;
}

/* RTL */
[dir="rtl"] {
  direction: rtl;
}
